<html>
<head>
<!--Custom Font-->
<link href="https://fonts.googleapis.com/css?family=Armata" rel="stylesheet">

<!-- Main CSS file -->
<link rel="stylesheet" href="main.css">

<meta name="viewport" content="width=device-width, initial-scale=1">
<link type="text/css" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<title>Listy</title>
</head>

<body>

<div class="registerAndLoginBtnPos">
<button class="registerAndLoginBtn" id="login" onclick="document.getElementById('loginModal').style.display='block'">Login</button>
<p id="registerDescr">Don't have an account?  Register Here!</p>
<button class="registerAndLoginBtn" onclick="document.getElementById('registrationModal').style.display='block'">Register</button>
</div>

   <!-- Login -->
        <div id="loginModal" class="modal">
            <center>
                <form class="modalContent animate" onsubmit="return false;" method="post" id="loginModal" >
                   <div>
                        <span onclick="document.getElementById('loginModal').style.display='none'" class="close" title="Close">&times;</span>
                    </div>

                    <div class="container">
                        <ul class="ErrorMessages" id="ErrorMessages"></ul>
                        <h2> Login </h2>
                        <hr>
                        <div>
                            <label for="email">Username: </label>
                            <input type="text" id="username">
                        </div>

                        <div>
                            <label for="password">Password: </label>
                            <input type="password" id="password">
                        </div>
                        <br><br>
						<p id="loginp"></p>
                        <button onclick="login('login','username','password','loginp','email')" type="submit" class="registerAndLoginBtn">Login</button>
                    </div>

                </form>
            </center>
        </div>   

    <!-- Registration -->
        <div id="registrationModal" class="Modal">
            <center>
                <form class="ModalContent animate" onsubmit="return false;" method="post" id="loginModal" >
                    <div class="imgcontainer">
                        <span onclick="document.getElementById('registrationModal').style.display='none'" class="close" title="Close">&times;</span>
                    </div>
                    <div class="container">
                        <ul class="ErrorMessages" id="ErrorMessages"></ul>
                        <h2> Register </h2>
                        <hr>
                        <div>
                            <label for="username">Username: </label>
                            <input type="text" id="regusername">
                        </div>
                        <div>
                            <label for="email">Email: </label>
                            <input type="text" id="email">
                        </div>
                        <div>
                            <label for="password">Password: </label>
                            <input type="password" id="regpassword">
                             <br><br>
                        </div>
						<p id="registerp"></p>
						<button  class="registerAndLoginBtn" onclick="login('register','regusername','regpassword','registerp','email')">Register</button>
                    </div>
                </form>
            </center>
        </div>   


<center>
    <br><br>
    <div class="listy">
        <img src="listy.png" height="235px" width="376px">
    </div>
    <br><br>
    <p>Welcome to Listy.  The collaborative list master.  Where you can create checklists and share them with other members at no cost!</p>
</center>
</body>

<script>
	
function login(enter,username,password,output,eml)
{	
	var user = document.getElementById(username);
	var pass = document.getElementById(password);
	var email = document.getElementById(eml);
	var out = document.getElementById(output);
	var urlrequest = "http://localhost:8080/" + enter;
	
	if ((enter == "login" && user.value == "" || pass.value == "") || (enter == "register" && email.value == "" || pass.value == "" || user.value == ""))
	{
		user.value = "";
		pass.value = "";
		email.value = "";
		out.innerHTML = "Please input into all fields!";
	}
	else
	{	
		$.ajax
		({
			type: "POST",
			url: urlrequest,
			dataType: "HTML",   
			data: JSON.stringify({us: user.value, ps: pass.value, em: email.value}),
			contentType:"application/json",
			success : function(ans)  //the response
			{	
				if (ans != 'logged' && ans != 'register')
				{
					out.innerHTML = ans;
				}
				else
				{
					user.value = "";
					pass.value = "";
					email.value = "";
					location.href="http://localhost:8080/main.html";
				}
			},
			//Just in case the connection fails for some reason.
			error: function(jgXHR, textStatus,errorThrown)
			{
				alert("Error: " + textStatus + " " + errorThrown);
			}
		});
	}
}
</script>

</html>